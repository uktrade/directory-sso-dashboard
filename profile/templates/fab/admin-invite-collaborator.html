{% extends 'fab/admin-base.html' %}

{% load static from staticfiles %}
{% load breadcrumbs from directory_components %}

{% block breadcrumbs %}
    {% breadcrumbs 'Remove profile' %}
        <a href="{{ services_urls.great_domestic }}">great.gov.uk</a>
        <a href="{% url 'find-a-buyer' %}">Business profile</a>
        <a href="{% url 'find-a-buyer-admin-collaborator-list' %}">Profile settings</a>
    {% endbreadcrumbs %}
{% endblock %}

{% block inner_content %}
    <section class="width-two-thirds">
        <h2 class="heading-large margin-top-0 margin-bottom-15">Invite collaborators</h2>
        <p>Invite collaborators and select the role.</p>
        <form method="post" enctype="multipart/form-data">
            {{ form }}
            <button class="button padding-left-60 padding-right-60">Send invite</button>
        </form>
    </section>

    {% if collaboration_invites %}
    <section class="width-full">
        <h2 class="heading-large margin-top-0 margin-bottom-15">Collaborators invited</h2>
        <p>User accounts linked to the business profile:</p>

        <table>
            <thead>
              <tr>
                <th class="border-light-grey padding-top-15 padding-bottom-15" scope="col">People</th>
                <th class="border-light-grey padding-top-15 padding-bottom-15" scope="col">Role</th>
                <th class="border-light-grey padding-top-15 padding-bottom-15 numeric" scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for collaborator in collaboration_invites %}
                {% if collaborator.sso_id != request.user.id %}
                  <tr>
                    <th class="border-white padding-top-15 padding-bottom-10" scope="row">{{ collaborator.name|default:collaborator.company_email }}</th>
                    <td class="border-white padding-top-15 padding-bottom-10">{{ collaborator.role|title }}</td>
                    <td class="border-white padding-top-15 padding-bottom-10 numeric">
                      {% if request.user.is_company_admin %}
                        <a href="{% url 'find-a-buyer-admin-collaborator-edit' sso_id=collaborator.sso_id %}" class="link">Edit</a>
                      {% else %}
                        <span>N/A</span>
                      {% endif %}
                    </td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
      </section>
    {% endif %}
{% endblock %}
