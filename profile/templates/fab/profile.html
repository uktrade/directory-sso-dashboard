{% extends 'apps-tabs.html' %}

{% load static from staticfiles %}

{% block head_css %}
    {{ block.super }}
    <link href="{% static 'css/company-profile.css' %}" media="all" rel="stylesheet" />
{% endblock %}

{% block tab_content %}

    {% if is_profile_owner %}
    <div id="user-mode-container">
        <div class="grid-row" >
            <div class="column-one-half">
                <a href="{% url 'find-a-buyer-admin-tools' %}">Admin tools</a>
                <span class="divider"></span>
                <span class="background-light-blue font-xsmall pill">Admin view</span>
            </div>
            <div class="column-one-half right-column">
                {% if company.is_published %}
                    {% if company.is_published_find_a_supplier %}
                        <div>
                            <a href="{{ services_urls.fas }}suppliers/{{ company.number }}/">View Find a Supplier profile</a>
                        </div>
                    {% endif %}
                    {% if company.is_published_investment_support_directory %}
                        <div> 
                            <a href="{{ services_urls.fas }}investment-support-directory/{{ company.number }}/">View UK Investment Support Directory profile</a>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        <hr>
    </div>
    {% endif %}

    {% if messages %}
        <div>
        {% for message in messages %}
            {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                <div class="success-message-box border-teal teal-text">
                    <h2 class="heading-large margin-30">{{ message }}</h2>
                </div>
            {% endif %}
        {% endfor %}
        </div>
    {% endif %}

    {% if not company.email_address or not company.description or not company.is_verified or not company.is_published %}
    <div id="alerts-top" class="grid-row alerts-container">
        {% if not company.email_address %}
            <div class="column-two-thirds flag-red-text">
                <h2 class="heading-medium">Add a business email address</h2>
                <p>Enter the email address you want overseas buyers to use.</p>
            </div>
            <div class="column-one-third alerts-button-container">
                <a class="button button-ghost-white" href="{% url 'find-a-buyer-email' %}">Add a business email address</a>
            </div>
        {% elif not company.description %}
            <div class="column-two-thirds flag-red-text">
                <h2 class="heading-medium">Add a business description</h2>
                <p>Enter a description of your business for overseas buyers to see.</p>
            </div>
            <div class="column-one-third alerts-button-container">
                <a class="button button-ghost-white" href="{% url 'find-a-buyer-description' %}">Add a business description</a>
            </div>
        {% elif not company.is_verified %}
            <div class="column-two-thirds flag-red-text">
                <h2 class="heading-medium">Confirm your identity</h2>
                <p>For security reasons, we need to check you're who you say you are.</p>
            </div>
            <div class="column-one-third alerts-button-container">
                <a class="button button-ghost-white" href="{{ services_urls.fab }}verify/">Confirm your identity</a>
            </div>
        {% elif not company.is_published %}
            {% if company.is_uk_isd_company %}
                <div class="column-two-thirds flag-red-text">
                    <h2 class="heading-medium">Profile ready to publish</h2>
                    <p>Your profile is also ready to be published on the UK Investment Support Directory.</p>
                </div>
                <div class="column-one-third alerts-button-container">
                    <a class="button button-ghost-white" href="{% url 'find-a-buyer-publish' %}">Schedule publication</a>
                </div>
            {% else %}
                <div class="column-two-thirds flag-red-text">
                    <h2 class="heading-medium">Publish business profile</h2>
                    <p>You can now publish your business profile.</p>
                </div>
                <div class="column-one-third alerts-button-container">
                    <a class="button button-ghost-white" href="{% url 'find-a-buyer-publish' %}">Publish your business profile</a>
                </div>
            {% endif %}
        {% endif %}
    </div>
    {% endif %}
    <div id="main-content" class="grid-row">
        <div class="column-one-third" id="data-column">

            <div id="logo-container">
                {% if not company.logo %}
                    <a id="add-image" href="{% url 'find-a-buyer-logo' %}" class="link">Add a logo</a>
                {% else %}
                    <img alt="{{ company.name }}" src="{{ company.logo }}" />
                    <a id="edit-image" href="{% url 'find-a-buyer-logo' %}" class="link pencil-link">Edit</a>
                {% endif %}
            </div>

            <div>
                <div class="grid-row" id="about-company-container">
                    <h3 class="column-two-thirds heading-medium">This company</h3>
                    <div class="column-one-third right-column">
                        <a href="{% url 'find-a-buyer-business-details' %}" class="link pencil-link">Edit</a>
                    </div>
                </div>

                <dl>
                    {% if company.website %}
                        <dt>Website</dt>
                        <dd class="ellipsis">
                            <a class="link" href="{{ company.website }}">{{ company.website }}</a>
                        </dd>
                    {% endif %}
                    <dt>Business type</dt>
                    {% if company.company_type == 'COMPANIES_HOUSE' %}
                        <dd>UK business registered in Companies House</dd>
                    {% else %}
                        <dd>UK business not registered in Companies House</dd>
                    {% endif %}
                    {% if company.employees %}
                        <dt>Number of employees</dt>
                        <dd>{{ company.employees }} employees</dd>
                    {% endif %}
                    {% if company.sectors %}
                        <dt>Core industry</dt>
                        <dd>{{ company.sectors|title }}</dd>
                    {% endif %}
                    <dt>UK address</dt>
                    <dd>{{ company.address_line_1 }}, {{ company.address_line_2 }}</dd>
                </dl>

                {% if not company.website %}
                    <a href="{% url 'find-a-buyer-website' %}" class="link">Add website</a>
                {% endif %}
                <hr>

                <section id="online-profiles">
                    <div class="grid-row">
                        <h3 class="column-two-thirds heading-medium">Online profiles</h3>
                        <div class="column-one-third right-column">
                            {% if company.facebook_url or company.twitter_url or company.linkedin_url %}
                                <a href="{% url 'find-a-buyer-social' %}" class="link pencil-link">Edit</a>
                            {% endif %}
                        </div>
                    </div>

                    <ul>
                        <li>
                            
                            {% if company.facebook_url %}
                                <a class="link" href="{{ company.facebook_url }}">
                                    <img alt="with Facebook" height="36px" src="{% static 'images/facebook.png' %}" width="36px" />
                                    <span class="ellipsis">Visit Company's Facebook</span>
                                </a>
                            {% else %}
                                <a class="link" href="{% url 'find-a-buyer-social' %}">
                                    <img alt="with Facebook" height="36px" src="{% static 'images/facebook.png' %}" width="36px" />
                                    <span>Add Facebook</span>
                                </a>
                            {% endif %}
                        </li>
                        <li>
                            {% if company.twitter_url %}
                                <a class="link" href="{{ company.twitter_url }}">
                                    <img alt="with Twitter" height="36px" src="{% static 'images/twitter.png' %}" width="36px" />
                                    <span class="ellipsis">Visit Company's Twitter </span>
                                </a>
                            {% else %}
                                <a class="link" href="{% url 'find-a-buyer-social' %}">
                                    <img alt="with Twitter" height="36px" src="{% static 'images/twitter.png' %}" width="36px" />
                                    <span>Add Twitter</span>
                                </a>
                            {% endif %}
                        </li>
                        <li>
                            {% if company.linkedin_url %}
                                <a class="link" href="{{ company.linkedin_url }}">
                                    <img alt="with LinkedIn" height="36px" src="{% static 'images/linkedin.png' %}" width="36px" />
                                    <span class="ellipsis">Visit Company's LinkedIn</span>
                                </a>
                            {% else %}
                                <a class="link" href="{% url 'find-a-buyer-social' %}">
                                    <img alt="with LinkedIn" height="36px" src="{% static 'images/linkedin.png' %}" width="36px" />
                                    <span>Add Linkedin</span>
                                </a>
                            {% endif %}
                        </li>
                    </ul>
                </section>
            </div>
        </div>
        <div class="column-two-thirds">
            <h2 class="heading-large" id="company-name">
                {{ company.name }}
                <a href="{% url 'find-a-buyer-business-details' %}" class="link pencil-link">Edit</a>
            </h2>
            <div class="{% if not company.email_address %}primary-action-required{% endif %} message-box border-medium border-stone background-white">
              <div class="grid-row">
                <h3 class="box-heading heading-medium black-text column-one-half">Profile email</h3>
                <div class="column-one-half right-column">
                    {% if company.email_address %}<a href="{% url 'find-a-buyer-email' %}" class="link pencil-link">Edit</a>{% endif %}
                </div>
              </div>
              <p class="mid-grey-text font-xsmall">This is the email address overseas buyers will use to contact you.</p>
              {% if company.email_address %}
                <span>{{ company.email_address }}</span>
              {% else %}
                <a href="{% url 'find-a-buyer-email' %}" class="link">Add email address</a>
              {% endif %}
            </div>

            <div class="{% if not company.description %}primary-action-required{% endif %} message-box border-medium border-stone background-white">
              <div class="grid-row">
                <h3 class="box-heading heading-medium black-text column-one-half">Company description</h3>
                <div class="column-one-half right-column">
                    {% if company.description %}<a href="{% url 'find-a-buyer-description' %}" class="link pencil-link">Edit</a>{% endif %}
                </div>
              </div>

              <p class="mid-grey-text font-xsmall">Tell overseas companies more about your business.</p>
              {% if company.description %}
                <span>{{ company.description }}</span>
              {% else %}
                <a href="{% url 'find-a-buyer-description' %}" class="link">Add description</a>
              {% endif %}
            </div>

            <div id="profile-products-services-container" class="{% if not company.expertise_products_services %}primary-action-required{% endif %} message-box border-medium border-stone background-white">
              <div class="grid-row">
                <h3 class="box-heading heading-medium black-text column-one-half">Products and services</h3>
                <div class="column-one-half right-column">
                    {% if company.expertise_products_services %}
                        <a href="{% url 'find-a-buyer-expertise-products-services-routing' %}" class="link pencil-link">Edit</a>
                    {% endif %}
                </div>
              </div>

              <p class="mid-grey-text font-xsmall">Tell overseas buyers what you can offer.</p>
              {% if company.expertise_products_services %}
                <dl>
                  {% for key, values in company.expertise_products_services.items %}
                    {% if values %}
                      <dt>{{ key }}</dt>
                      <dd>{{ values }}</dd>
                    {% endif %}
                  {% endfor %}
                </dl>
              {% else %}
                <a href="{% url 'find-a-buyer-expertise-products-services-routing' %}" class="link">Add products and services</a>
              {% endif %}
            </div>

            <div id="profile-expertise-container" class="message-box action-required border-medium border-black background-white">
              <div class="grid-row">
                <h3 class="box-heading heading-medium black-text column-one-half">
                    Expertise
                </h3>
                <div class="column-one-half right-column">
                    {% if company.has_expertise %}<a href="{% url 'find-a-buyer-expertise-routing' %}" class="link pencil-link">Edit</a>{% endif %}
                </div>
              </div>
              <div class="grid-row">
                  <p class="mid-grey-text font-xsmall">Tell overseas buyers about your specialist knowledge or skills.</p>
                  {% if company.has_expertise %}
                      <dl>
                        {% if company.expertise_industries %}
                            <dt>Industry</dt>
                            <dd>{{ company.expertise_industries }}</dd>
                        {% endif %}
                        {% if company.expertise_regions %}
                            <dt>Regional</dt>
                            <dd>{{ company.expertise_regions }}</dd>
                        {% endif %}
                        {% if company.expertise_countries %}
                            <dt>International</dt>
                            <dd>{{ company.expertise_countries }}</dd>
                        {% endif %}
                        {% if company.expertise_languages %}
                            <dt>Languages</dt>
                            <dd>{{ company.expertise_languages }}</dd>
                        {% endif %}
                    {% else %}
                      <a href="{% url 'find-a-buyer-expertise-routing' %}" class="link">Add expertise</a>
                    {% endif %}
              </div>
            </div>

            <div class="message-box action-required border-medium border-stone background-white">
              <div class="grid-row">
                <h3 class="box-heading heading-medium black-text column-one-half">Business showcase</h3>
              </div>
              <div class="grid-row">
                  <p class="mid-grey-text font-xsmall">Add images and success case studies to promote your products and services.</p>
                  <ul id="case-studies">
                      {% for case_study in company.supplier_case_studies %}
                          <li id="case-study-{{ case_study.pk }}">
                            <img src="{{ case_study.image_one }}" width="60" />
                            <span>{{ case_study.title }}</span>
                            <a id="edit-image-{{ case_study.pk }}" href="{% url 'find-a-buyer-case-study-edit' id=case_study.pk step='basic' %}" class="link pencil-link">Edit</a>
                        </li>
                      {% endfor %}
                  </ul>
              </div>
              <a id="add_case_study" href="{% url 'find-a-buyer-case-study' step='basic' %}" class="link">Add a case study</a>
            </div>
        </div>
    </div>

{% endblock %}

{% block feedback_reporter %}
    <section class="error-reporting">
        <div class="container">
            <a id="error-reporting-section-contact-us" href="{{ services_urls.feedback }}" target="_blank">Is there anything wrong with this page?</a>
        </div>
    </section>
{% endblock %}
