{% extends 'business_profile/admin-base.html' %}

{% load static from staticfiles %}
{% load breadcrumbs from directory_components %}

{% block breadcrumbs %}
    {% breadcrumbs 'Invite collaborators' %}
        <a href="{{ services_urls.great_domestic }}">great.gov.uk</a>
        <a href="{% url 'business-profile' %}">Business profile</a>
        <a href="{% url 'business-profile-admin-tools' %}">Profile settings</a>
    {% endbreadcrumbs %}
{% endblock %}

{% block inner_content %}
    <section class="width-two-thirds">
        <h2 class="heading-large margin-top-0 margin-bottom-15">Invite collaborators</h2>
        <p>Invite collaborators and select the role.</p>
        <form method="post" enctype="multipart/form-data">
            {{ form }}
            <button class="button padding-left-60 padding-right-60">Send invite</button>
        </form>
    </section>

    {% if collaborator_invites %}
    <section class="width-full">
        <h2 class="heading-large margin-top-0 margin-bottom-15">Collaborators invited</h2>
        <p>User accounts linked to the business profile:</p>

        <table>
            <thead>
              <tr>
                <th class="border-light-grey padding-top-15 padding-bottom-15" scope="col">People</th>
                <th class="border-light-grey padding-top-15 padding-bottom-15" scope="col">Role</th>
                <th class="border-light-grey padding-top-15 padding-bottom-15 numeric" scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for invite in collaborator_invites %}
                {% if invite.sso_id != request.user.id %}
                  <tr>
                    <th class="border-white padding-top-15 padding-bottom-10" scope="row">{{ invite.collaborator_email }}</th>
                    <td class="border-white padding-top-15 padding-bottom-10">{{ invite.role|title }}</td>
                    <td class="border-white padding-top-15 padding-bottom-10 numeric">
                      <form action="{% url 'business-profile-collaboration-invite-delete' %}" method="post" enctype="multipart/form-data" class="no-default-margin">
                        <input type="hidden" name="invite_key" value="{{ invite.uuid }}" />
                        <input type="submit" class="link background-white numeric" value="Delete">
                      </form>
                    </td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
      </section>
    {% endif %}
{% endblock %}
